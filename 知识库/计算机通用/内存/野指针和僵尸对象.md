# 野指针和僵尸对象

- ### 对象回收的本质

  - 内存回收的本质

    > 申请1个变量，实际上就是向系统申请了指定字节数的内存空间，这些空间系统就不会再分配给别人了
    >
    > 当变量被回收的时候，代表变量占用的字节空间从此以后系统可以分配给别人使用了
    >
    > 但那个字节空间存储的数据还在那里

  - 对象回收的本质

    > 所谓的对象回收，指的是对象占用的空间可以分配给别人
    >
    > 当这个对象占用的空间没有分配给别人前，对象的数据还在

- ### 野指针

  - C 语言中的野指针

    > 定义了一个指针变量，没有初始化，这个指针变量的值是一个垃圾值，指向一块随机的内存空间，这个指针叫做野指针

  - OC 中的野指针

    > 指针变量指向的对象已经被回收了，这样的指针叫野指针

- ### 僵尸对象

  > 一个已经被释放的对象，但是它所占用的空间还没被系统分配给别人，这样的对象叫僵尸对象

  - 开启僵尸对象功能，将会使僵尸对象内存空间不能被访问，直接报错

    > Edit Scheme - Run - Diagnostics - Enable Zombie Objects

  - 使用野指针访问僵尸对象会报错，如何避免僵尸对象错误？

    > 当一个指针成为野指针后，将它设置为 nil
    >
    > 当一个指针的值为 nil 后，通过这个指针去调用对象方法时，包括使用点语法时，不会报错
    >
    > 只是没有任何反应
    >
    > 但是通过 -> 直接访问属性就会报错

  - 无法复活一个僵尸对象
  
- 开启僵尸对象检测

  > 通过野指针访问僵尸对象，不管僵尸对象的空间有没有分配给别人，都会报错

- 如何避免使用僵尸对象

  > 当指针为野指针的时候，将其赋值为 nil