# APP开发步骤、流程

## 分析功能需求



## 流程

画界面 -- 对接口(获取数据) -- 展示数据 -- 用户交互 -- 数据处理 -- 保存数据



### 画界面

> 创建UI控件并布局【在View类中进行】

- 纯代码形式
- storyboard【中创建的是一个个UIKit类的单例对象，可以自定义UIKit的子类“绑定”它来添加更多自定义控制】
- xib【单独创建一个UIKit类的单例对象，可以跟这个UIKit类“绑定”来实现更多自定义控制】
- SwiftUI

### 数据处理

- 获取

  - 网络(对接口)

    > 使用AFN封装网络工具单例，传入参数访问接口地址，从网络获取到JSON、XML、pList等格式的Data(二进制数据)

  - 本地

    > - 在bundle的话，用bundle的urlForResource获取到路径URL
    >
    > - 在沙盒的话，找到沙盒路径URL
    >
    > 用data的contentsOfUrl创建Data(二进制数据)

- 解析(反序列化，字典转模型)

  > 分析要获取的数据，根据其属性创建对应的model(数据模型类),必须有两个符合规范的构造方法，可以从字典直接转换为数据模型（可使用YYModel快速实现）
  >
  > 在视图控制器中设置字典数组属性，并且重写其getter方法，让其可以在懒加载时直接将把从存储介质获得的字典数组，通过遍历将其元素(数据字典)转换为数据模型，并存储到此字典数组中返回。
  >
  > 使用JSONSerialization、JSONDecoder、PropertyListSerialization、SAX或DOM等将获取到的二进制数据解析为数组或字典
  >
  > 将数据数组或字典转换成数据模型数组

- 展示

  > 1. 创建自定义view的类(创建一个model属性，和与model属性的属性对应的用来显示其内容的控件属性，重写model属性的setter方法setModel，在其中将数据赋值给相应控件来显示, 必须有两个符合规范的构造方法, 如果视图需要从文件获取数据，则创建一个同名构造方法，在其中直接获取好数据赋值给视图属性，然后返回此视图，记得控制器中只需得到一个已经fully ready，只需和数据模型相结合的视图了)
  > 2. 创建xib文件，将view size设置为freeform，然后设置view的尺寸，为所有子控件添加好尺寸
  > 3. 将model数据和view相结合，调用视图的setModel方法即可
  >
  > 展示数据【在Controller类中进行】
  >
  > 直接将模型传递给View类
  >
  > 在set方法中为控件赋值来展示数据

- 生成(序列化)

  > 将模型数据数组转换为json、xml、plist等二进制形式data

- 存储(持久化)

  > 存储在bundle, 沙盒, iCloud等地方



### 逻辑处理(用户交互)

用户交互【】

监听屏幕事件(用户交互)

为屏幕控件注册事件add target

屏幕控件通过调用代理协议的方法名通知遵守了代理协议，即实现了代理协议方法的对象

通过函数指针、block、closure等方式回调

处理屏幕事件

做相应的反应

获取到用户的数据，生成一定格式并保存

做动画

跳转到下个场景

进行网络连接

展示某些数据

... ...

1. 



1. 1. 

