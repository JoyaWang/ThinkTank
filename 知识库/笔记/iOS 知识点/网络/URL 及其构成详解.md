# URL 及其构成详解

- ### URL 组成格式

  > `网络协议`://`主机IP地址或域名`:`端口号`/`路径`
  >
  > - 网络协议：不同的协议代表不同的资源获取方式
  > - 主机地址：主机的唯一标识(ip地址、域名)
  > - 路径: 此 url 要访问的资源在主机中的具体位置

  ### 组成部分1: 网络协议

  - 存在意义

    > 回忆socket，最原始的网络通信就是通过socket发送和接收二进制数据，在发送和接收时数据的编制遵循一定的规则，才可以正常通信，而不同的规则就是网络协议，比如http协议要求，发送的数据叫做请求，请求有请求头和请求体，请求头中不同field代表不同的含义，这样发送和接收时都遵守这个协议，数据就可发送成功，还有用于其他网络传输的协议。

  > - http
  >   
  > 发送的字符串数据是按照 HTTP 协议格式编制的，网络间传输网页(声音、视频、文字等)的URL协议，超文本传输协议
  >   
  > (默认端口80，需要有个处理http请求的软件如apache监听服务器电脑的80端口)超文本传输协议，网页(声音、视频、文字等)传输	
  >   
  >   http://192.168.31.254:5000/  
  >   http://www.baidu.com:80/
  > http:// www.itheima.com:80/images/xx00.png
  >   
  > - ftp
  >   	网络间传输文件的协议
  >     	ftp://192.168.31.254:21
  >
  >   FTP（File Transfer Protocol，文件传输协议） 是 TCP/IP 协议组中的协议之一。FTP协议包括两个组成部分，其一为FTP服务器，其二为FTP客户端。其中FTP服务器用来存储文件，用户可以使用FTP客户端通过FTP协议访问位于FTP服务器上的资源。在开发网站的时候，通常利用FTP协议把网页或程序传到Web服务器上。此外，由于FTP传输效率非常高，在网络上传输大的文件时，一般也采用该协议。
  >
  >   默认情况下FTP协议使用TCP端口中的 20和21这两个端口，其中20用于传输数据，21用于传输控制信息。但是，是否使用20作为传输数据的端口与FTP使用的传输模式有关，如果采用主动模式，那么数据传输端口就是20；如果采用被动模式，则具体最终使用哪个端口要服务器端和客户端协商决定。
  >
  > - smb
  >
  >   发送的字符串数据是按照smb协议格式编制的
  >
  >   Server Message Block SMB，网络间文件共享的协议，默认端口139、445等
  >
  >   是在会话层（session layer）和表示层（presentation layer）以及小部分应用层（application layer）的协议。
  >
  >   smb://192.168.31.254:139
  >
  > - afp
  >
  >   Apple Filing Protocol （AFP）是一种网络协议，为Mac计算机提供文件服务，苹果的网络间文件传输协议
  >
  >   afp://192.168.31.254:548
  >
  > - file
  >   	可以访问的Mac本地的文件路径的URL
  >     	file:///Users/joyawang/Desktop/qq空间/244092911 
  >
  > - smtp
  >   	发送邮件的协议
  >
  > - pop3
  >   	接收邮件的协议
  >
  > - tel://
  >   	电话通信协议
  >
  > - sms://
  >   	短信通信协议

### 组成部分2: 主机(服务器)IP地址或域名

- IP 地址

  > - IPV4
  >
  >   IP 地址第 4 版 	x.x.x.x 表示互联网中的一个地址
  >
  >   每个x可以是从0到255的任意一个数(256个)，而要表示这个范围的数需要8位二进制数，有4个这样的数，所以需要32位二进制数，而32位二进制数可以表示(2^32)42.95亿个ip地址(256*256*256*256)
  >
  > - IPV6
  >
  >   IP 地址第 6 版
  >
  >   用128位二进制表示一个ip地址，所以可以有(2^128)2的128次方个IP地址
  >   
  > - 常见 IP 地址:
  >
  >   - 192.168.1.1
  >
  >   - 127.0.0.1 回环地址(本机地址) 
  >
  >   - 255.255.255.255 广播
  >
  >   - 0.0.0.0 any
  >
  >   - 私有Private IP address: home router, business router
  >
  >     10.
  >
  >     192.168.
  >
  >     172.16.
  >
  > - 举例
  >
  >   协议://主机ip地址或域名:端口号/路径
  >
  >   http://www.baidu.com/index.html
  >
  >   http:// [www.itheima.com:80/images/xx00.png](http://www.itheima.com:80/images/xx00.png)
  >
  >   [smb://192.168.31.254](smb://192.168.31.254) 从finder去Joyacloud的URL
  >
  >   https://joyacloud.cn8.quickconnect.cn/ 从浏览器去JoyaCloud的域名URL
  >
  >   http://192.168.31.254:5000/  从浏览器去JoyaCloud的本地ip地址URL
  >
  >   [afp://192.168.1.2](afp://192.168.1.2)
  >
  >   [file:///Users/joyawang/Desktop/qq空间/244092911](file:///Users/joyawang/Desktop/qq空间/244092911) 可以访问的Mac本地的文件路径的URL
  >
  >   /Users/joyawang/Desktop/qq空间/244092911 Mac本地的文件路径

- 域名

  > IP地址不好记，域名好记，但是在访问某域名时需要域名解析服务器将域名解析为对应的IP地址
  >
  > www.baidu.com 和 182.61.200.6 访问的是同一台服务器，一个是域名，一个是 ip 地址

- 其它概念

  > - Subnet Mask子网掩码
  >
  >   > 255.255.255.255 和IP地址一起使用可以确定另一个电脑是否和你在同一网络
  >   >
  >   > which is used to decide whether or not some other computers on the same network as you
  >
  > - Gateway/Router 网关/路由器
  >
  >   > 192.168.31.1
  >
  > - ISP Internet Service Provider 网络服务提供商
  >
  > - DHCP Server 动态IP地址分配服务器
  >
  > - DNS Server 域名解析服务器 
  >
  >   > 免费DNS服务器 
  >   >
  >   > 谷歌：8.8.8.8 
  >   >
  >   > 国内：014.014.014.014
  >
  > - WAN口 
  >
  >   > Wide area network interface 广域网接口
  >   >
  >   > 主要用于连接外部网络，如ADSL、DDN、以太网等各种接入线路。
  >   >
  >   > 宽带路由器的【路由】功能就是体现在WAN口IP地址和LAN口IP地址之间的数据路由上，我们通常根据网络运营商提供的接入方式来设置WAN口的网络参数，通常有静态IP地址、动态IP地址或PPOE等方式，它与网络运营商的接入设备处于同一个【外部】网络中。
  >
  > - LAN口 
  >
  >   > Local Area Network Interface 局域网接口
  >   >
  >   > 用来连接家庭内部网络，主要与家庭中的交换机、集线器或PC相连。
  >   >
  >   > LAN口的IP地址则设置为本地局域网内的IP地址，通常是我们自己可以在宽带路由器上自行设定的IP地址，LAN口下所连接的计算机组成一个【本地局域网】，路由器的LAN口IP地址是这个网络的网关。
  >
  > - hosts 域名本地解析
  >
  >   > 相当于本地域名服务器
  >   >
  >   > 操作系统中的hosts文件则是有着类似“本地DNS服务器”的作用，而且比网络上的DNS具有更高的优先级。如果你在hosts里面配置了某个域名和IP的对应关系，比如127.0.0.1 -> localhost，那么当你在本机访问localhost时，系统首先会从hosts里面解析出127.0.0.1这个IP，而不会再去查询网络上的DNS服务器。hosts文件仅对本机生效，对其他电脑和网站本身不会造成任何影响
  >   >
  >   > - Windows 系统 Hosts 文件路径：C:\Windows\System32\drivers\etc\hosts；
  >   >
  >   > - Mac 系统 hosts 文件路径：/etc/hosts；
  >   >
  >   > - Linux 系统的 hosts 文件一般也是在：/etc/hosts；
  >   >
  >   > - Android 系统的 hosts 文件路径：/system/etc/hosts (需要Root权限修改)；

### 组成部分3: 端口号

- 介绍

  > 连接到某个服务器后，要根据URL协议类型选择服务器上不同的处理数据的程序，如处理http协议的apache软件一般是服务器的80端口。如果没有安装web服务器软件的话，80端口一般是空闲的。
  >
  > 服务器上会有不同的程序处理不同的网络请求，端口号就是每个程序的身份标识。(是逻辑地址意味着不是物理的，不是物质上实际存在的)
  >
  > HTTP默认的端口80：即向一个服务器发送一个HTTP网络请求时，这个网络请求到了服务器后，直接调用服务器上监听80端口的方法，也就是运行那个程序。
  >
  > FTP协议默认的端口21
  >
  > pop3 接收邮件的协议110
  >
  > smtp 发送邮件的协议25

- 端口的分类

  - 公认端口(Well Know Ports)

    > 这类端口也常称为“常用端口”。这类端口的端口号从0-1024，它们紧密绑定于一些特定的服务。通常这些端口的通信明确表明了某种服务的协议，这种端口是不可再重新定义它的作用对象。比如:http默认80，ftp默认21

  - 注册端口(Registered Ports)

    > 端口号从1025到49151.分配给用户进程或应用程序。这些进程主要是用户选择安装的一些应用程序，而不是已经分配好了的公认端口的常用程序。

  - 动态或私有端口(Dynamic or Private Ports)

    > 从49152到65535.之所以称为动态端口，是因为它一般不固定分配某种服务，而是动态分配

- 例如192.168.31.254这个服务器地址，不同的协议类型会导致访问时访问不同的端口号

  > http://192.168.31.254:5000/
  > 	192.168.31.254这个地址上的服务器，遵守http协议的web请求会被5000端口的程序处理
  > smb://192.168.31.254
  > 	192.168.31.254这个地址上的服务器，遵守smb协议的请求会被端口的程序处理

### 组成部分4: 路径

> /Users/joyawang/Desktop/qq空间/244092911 Mac本地的文件路径

